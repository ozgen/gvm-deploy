apiVersion: v1
kind: Secret
metadata:
  name: {{ include "gvm-lite-stack.fullname" . }}-gvmd-secrets
  namespace: {{ .Release.Namespace }}
type: Opaque
stringData:
  ADMIN_PASSWORD: {{ .Values.gvmdLite.secrets.ADMIN_PASSWORD | quote }}
  JWT_SECRET: {{ .Values.gvmdLite.secrets.JWT_SECRET | quote }}
  CREDENTIAL_ENCRYPTION_KEY: {{ .Values.gvmdLite.secrets.CREDENTIAL_ENCRYPTION_KEY | quote }}

  # Notification secrets
  {{- with .Values.gvmdLite.secrets.SMTP_USERNAME }}
  SMTP_USERNAME: {{ . | quote }}
  {{- end }}
  {{- with .Values.gvmdLite.secrets.SMTP_PASSWORD }}
  SMTP_PASSWORD: {{ . | quote }}
  {{- end }}
  {{- with .Values.gvmdLite.secrets.SLACK_WEBHOOK_URL }}
  SLACK_WEBHOOK_URL: {{ . | quote }}
  {{- end }}
  {{- with .Values.gvmdLite.secrets.AZURE_CONTAINER_ACCESS_KEY }}
  AZURE_CONTAINER_ACCESS_KEY: {{ . | quote }}
  {{- end }}
